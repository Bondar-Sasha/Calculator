(()=>{"use strict";var e=[{mainFond:"rgb(186, 196, 205)",fond:"#333333",screen:{fond:"#b8c0a9",data:"#333333"},buttons:{fond:"#838383",data:"#fcfcfc"}},{mainFond:"rgb(186, 196, 205)",fond:"#40668b",screen:{fond:"#e9eeef",data:"#25312f"},buttons:{fond:"#25312f",data:"#e9eeef"}},{mainFond:"rgb(186, 196, 205)",fond:"#333333",screen:{fond:"rgb(151, 154, 157)",data:"#333333"},buttons:{fond:"rgb(151, 154, 157)",data:"#333333"}},{mainFond:"rgb(186, 196, 205)",fond:"#019a9c",screen:{fond:"aliceblue",data:"#333333"},buttons:{fond:"aliceblue",data:"#333333"}},{mainFond:"rgb(186, 196, 205)",fond:"#565c6c",screen:{fond:"#36b7d4",data:"#333333"},buttons:{fond:"#36b7d4",data:"#333333"}}],n={"--mainFond":e[0].mainFond,"--fond":e[0].fond,"--screenFond":e[0].screen.fond,"--screenColor":e[0].screen.data,"--buttonsFond":e[0].buttons.fond,"--buttonsColor":e[0].buttons.data};const r=e,t=function(e){var n=document.documentElement;Object.entries(e).forEach((function(e){n.style.setProperty(e[0],e[1])}))},o=function(e){return document.getElementById(e)};var i=o("color_scheme");r.forEach((function(e){var n=document.createElement("div");n.setAttribute("class","colors_container");var r={"--fond":e.fond,"--screenFond":e.screen.fond,"--screenColor":e.screen.data,"--buttonsFond":e.buttons.fond,"--buttonsColor":e.buttons.data};n.addEventListener("click",(function(){t(r)})),n.style.borderTopColor=e.fond,n.style.borderRightColor=e.screen.fond,n.style.borderLeftColor=e.buttons.fond,i.append(n)}));const a=function(e,n){var r=parseFloat(e);if(isNaN(r))return"";var t=r.toFixed(n);return parseFloat(t).toString()},s=function(e){return e[e.length-1]},u=function e(n){return n<0||n%1!=0?null:0===n||1===n?1:n*e(n-1)};var l={number:function(e){return Number(e[0])},degree:function(e){return Math.pow(Number(e[1]),Number(e[0]))},sqrt:function(e){return Math.pow(Number(e[1]),1/Number(e[0]))},factorial:function(e){return u(Number(e[0]))},count:function(e,n,r){switch(n){case"plus":return e+r;case"minus":return e-r;case"multiply":return e*r;case"divide":return e/r;case"percent":return r/e;default:return null}}},c=function(e){return![null,1/0,NaN].includes(e)};function p(e){try{var n=JSON.parse(JSON.stringify(e)),r=s(n);if(1===n.length){if("number"===r.operation){var t=l[s(n).operation](s(n).values);if(!c(t))throw new Error("result is null");return a(t.toString(),7)}if(["factorial","sqrt","degree"].includes(r.operation)){if(2!==r.values.length)throw new Error("result is null");var o=l[s(n).operation](s(n).values);if(!c(o))throw new Error("result is null");return a(o.toString(),7)}}var i=null;if(i=l.count(l[n[0].operation](n[0].values),n[1].operation,l[n[2].operation](n[2].values)),!c(i))throw new Error("result is null");return a(i.toString(),7)}catch(e){return"error"}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,v(t.key),t)}}function v(e){var n=function(e){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(n)?n:n+""}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}var h={currentOperation:function(e,n){var r=!1;return n.forEach((function(n){s(e).operation===n&&(r=!0)})),r},currentOperationNot:function(e,n){var r=!0;return n.forEach((function(n){s(e).operation===n&&(r=!1)})),r}};const b=function(e,n){var r=!0,t=0===e.length?[{operation:"null"}]:e;return Object.entries(n).forEach((function(e){var n,o,i=(o=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;u=!1}else for(;!(u=(t=i.call(r)).done)&&(s.push(t.value),s.length!==n);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(n,o)||function(e,n){if(e){if("string"==typeof e)return m(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,n):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];r=h[a](t,s)})),r},g={currentOperation:["number","minus","sqrt","degree","factorial"]},y={currentOperation:["null","number","plus","sqrt","degree","factorial"]},x={currentOperation:["number","sqrt","degree","factorial"]},_={currentOperation:["number","sqrt","degree","factorial"]},w={currentOperation:["number"]},S={currentOperation:["number"]},E={currentOperationNot:["sqrt","degree","factorial"]},O={currentOperationNot:["sqrt","degree","factorial"]},q={currentOperation:["number"]},I={currentOperationNot:["factorial"]},j={currentOperation:["number"]},M={currentOperation:["number"]};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function N(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return C(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function P(e,n){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},P(e,n)}function T(e,n,r){return(n=F(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function F(e){var n=function(e){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(n)?n:n+""}const V=new(function(e){function n(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return T(e=function(e,n,r){return n=A(n),function(e,n){if(n&&("object"==U(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(n,r||[],A(e).constructor):n.apply(e,r))}(this,n,[].concat(t)),"getUI",(function(){return e.setUI(),e.UI.join("")})),T(e,"intermediateCount",(function(n){var r=e.getExpressionHandlers(n.operation).rewrite;return 3===e.expression.length&&(r([{icon:"",operation:"number",values:[p(e.expression)]},n]),!0)})),T(e,"setUI",(function(){e.UI=[],e.expression.forEach((function(n){var r,t,o,i;if("sqrt"===n.operation)e.UI.push(n.change?'<span class="sqrt"><sup class="sup">'.concat(null!==(r=n.values[0])&&void 0!==r?r:"","</sup>&radic;<span>").concat(null!==(t=n.values[1])&&void 0!==t?t:"","</span></span>"):'<span class="sqrt"><sup>'.concat(null!==(o=n.values[0])&&void 0!==o?o:"",'</sup>&radic;<span class="sqrt_base">').concat(null!==(i=n.values[1])&&void 0!==i?i:"","</span></span>"));else if("degree"===n.operation){var a,s,u,l;e.UI.push(n.change?'<span class="degree"><span >'.concat(null!==(a=n.values[1])&&void 0!==a?a:"",'</span><sup class="sup">').concat(null!==(s=n.values[0])&&void 0!==s?s:"","</sup></span>"):'<span class="degree"><span class="sup_base">'.concat(null!==(u=n.values[1])&&void 0!==u?u:"","</span><sup>").concat(null!==(l=n.values[0])&&void 0!==l?l:"","</sup></span>"))}else{var c;e.UI.push((null!==(c=n.values[0])&&void 0!==c?c:"")+n.icon)}}))})),T(e,"getExpressionHandlers",(function(n){var r;return"error"===(null===(r=s(e.expression))||void 0===r?void 0:r.values[0])&&(e.expression=[],e.history=""),{add:function(r){return e.expression=[].concat(N(e.expression),[r]),e.history=n,!0},rewrite:function(r){return e.expression=r,e.history=n,!0},change:function(r){return function(t){return t?e.expression[t]=r:e.expression[e.expression.length-1]=r,e.history=n,!0}}}})),T(e,"clear",(function(){return(0,e.getExpressionHandlers("").rewrite)([]),e.UI=[],!0})),T(e,"setValue",(function(n){return function(){if(!b(e.expression,I))return!1;var r=e.getExpressionHandlers("number"),t=r.add,o=r.rewrite,i=r.change;if(!s(e.expression))return t({icon:"",operation:"number",values:[n.toString()]}),!0;if("equal"===e.history)return o([{icon:"",operation:"number",values:[n.toString()]}]),!0;if(s(e.expression).twoValue){var a=s(e.expression).values;return s(e.expression).change?a[0]?a[0]+=n.toString():a[0]=n.toString():a[1]?a[1]+=n.toString():a[1]=n.toString(),!0}return 1===e.expression.length&&"minus"===s(e.expression).operation?(o([{icon:"",operation:"number",values:["-"+n.toString()]}]),!0):"number"!==s(e.expression).operation?(t({icon:"",operation:"number",values:[n.toString()]}),!0):("0"!==n.toString()||"0"!==s(e.expression).values[0][0]||"."===s(e.expression).values[0][1])&&(i({icon:"",operation:"number",values:[s(e.expression).values[0]+n.toString()]})(),!0)}})),T(e,"change_sign",(function(){if(!b(e.expression,j))return!1;var n=e.getExpressionHandlers().change;if(3===e.expression.length){if("plus"===e.expression[e.expression.length-2].operation)return n({icon:"-",operation:"minus",values:N(e.expression[e.expression.length-2].values)})(e.expression.length-2),!0;if("minus"===e.expression[e.expression.length-2].operation)return n({icon:"+",operation:"plus",values:N(e.expression[e.expression.length-2].values)})(e.expression.length-2),!0}return"-"===s(e.expression).values[0][0]?s(e.expression).values[0]=s(e.expression).values[0].slice(1):s(e.expression).values[0]="-"+s(e.expression).values[0],!0})),T(e,"percent",(function(){if(!b(e.expression,M))return!1;var n=e.getExpressionHandlers("percent").add;return e.intermediateCount({icon:"%",operation:"percent",values:[]})||n({icon:"%",operation:"percent",values:[]}),!0})),T(e,"division",(function(){if(!b(e.expression,_))return!1;var n=e.getExpressionHandlers("divide").add;return e.intermediateCount({icon:"/",operation:"divide",values:[]})||n({icon:"/",operation:"divide",values:[]}),!0})),T(e,"multiply",(function(){if(!b(e.expression,x))return!1;var n=e.getExpressionHandlers("multiply").add;return e.intermediateCount({icon:"*",operation:"multiply",values:[]})||n({icon:"*",operation:"multiply",values:[]}),!0})),T(e,"minus",(function(){if(!b(e.expression,y))return!1;var n=e.getExpressionHandlers("minus").add;return!!e.intermediateCount({icon:"-",operation:"minus",values:[]})||("plus"===s(e.expression)?(s(e.expression).operation="minus",!0):(n({icon:"-",operation:"minus",values:[]}),!0))})),T(e,"sum",(function(){if(!b(e.expression,g))return!1;var n=e.getExpressionHandlers("plus"),r=n.add,t=n.rewrite;return!(!e.intermediateCount({icon:"+",operation:"plus",values:[]})&&(2===e.expression.length&&"minus"===s(e.expression)?(t([]),e.history="",0):"minus"===s(e.expression)?(s(e.expression).operation="plus",0):(r({icon:"+",operation:"plus",values:[]}),0)))})),T(e,"dot",(function(){return!!b(e.expression,q)&&!s(e.expression).values[0].includes(".")&&(s(e.expression).values[0]+=".",!0)})),T(e,"equal",(function(){return(0,e.getExpressionHandlers("equal").rewrite)([{icon:"",operation:"number",values:[p(e.expression)]}]),!0})),T(e,"cancel",(function(){})),T(e,"MC",(function(){return e.memory="",alert(e.memory),!0})),T(e,"MR",(function(){var n;return!!e.memory&&("number"===(null===(n=s(e.expression))||void 0===n?void 0:n.operation)?(s(e.expression).values[0]=e.memory.toString(),!0):(e.setValue(e.memory)(),!0))})),T(e,"M_MINUS",(function(){return 1===e.expression.length&&"number"===s(e.expression).operation&&(e.memory=Number(e.memory)-Number(s(e.expression).values[0]),alert(e.memory),!0)})),T(e,"M_PLUS",(function(){return 1===e.expression.length&&"number"===s(e.expression).operation&&(e.memory=Number(e.memory)+Number(s(e.expression).values[0]),alert(e.memory),!0)})),T(e,"factorial",(function(){if(!b(e.expression,S))return!1;var n=e.getExpressionHandlers("factorial"),r=n.change,t=n.rewrite;return 3===e.expression.length&&"number"!==s(e.expression).operation?(t([{icon:"!",operation:"factorial",values:[p(e.expression)]}]),!0):!!s(e.expression)&&(r({icon:"!",operation:"factorial",values:[s(e.expression).values[0]]})(),!0)})),T(e,"_1_x",(function(){var n;if(!b(e.expression,w))return!1;var r=e.getExpressionHandlers("equal").change,t=a(1/(null===(n=s(e.expression))||void 0===n?void 0:n.values[0]),7);return r({icon:"",operation:"number",values:["Infinity"===t?"error":t]})(),!0})),T(e,"ten_x",(function(){return!!b(e.expression,E)&&((0,e.getExpressionHandlers("degree").add)({icon:"",operation:"degree",twoValue:!0,change:!0,values:[null,"10"]}),!0)})),T(e,"degree",(function(n){return function(){if(!b(e.expression,E))return!1;var r,t,o=e.getExpressionHandlers("degree"),i=o.add,a=o.change;return n?"number"===(null===(r=s(e.expression))||void 0===r?void 0:r.operation)?(a({icon:"",operation:"degree",twoValue:!0,change:!1,values:[n.toString(),s(e.expression).values[0]]})(),!0):(i({icon:"",operation:"degree",twoValue:!0,change:!1,values:[n.toString()]}),!0):"number"===(null===(t=s(e.expression))||void 0===t?void 0:t.operation)?(a({icon:"",operation:"degree",twoValue:!0,change:!0,values:[null,s(e.expression).values[0]]})(),!0):(i({icon:"",operation:"degree",twoValue:!0,change:!1,values:[]}),!0)}})),T(e,"sqrt",(function(n){return function(){if(!b(e.expression,O))return!1;var r,t,o=e.getExpressionHandlers("sqrt"),i=o.add,a=o.change;return n?"number"===(null===(r=s(e.expression))||void 0===r?void 0:r.operation)?(a({icon:"",operation:"sqrt",twoValue:!0,change:!1,values:[n.toString(),s(e.expression).values[0]]})(),!0):(i({icon:"",operation:"sqrt",twoValue:!0,change:!1,values:[n.toString()]}),!0):"number"===(null===(t=s(e.expression))||void 0===t?void 0:t.operation)?(a({icon:"",operation:"sqrt",twoValue:!0,change:!0,values:[null,s(e.expression).values[0]]})(),!0):(i({icon:"",operation:"sqrt",twoValue:!0,change:!1,values:[]}),!0)}})),T(e,"getActions",(function(){return e})),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&P(e,n)}(n,e),r=n,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(function(){return e=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.expression=[],this.UI=[],this.memory=0,this.history=""},(n=[{key:"getUI",value:function(){throw new Error('The "getUI" method must be implemented')}},{key:"setUI",value:function(){throw new Error('The "setUI" method must be implemented')}},{key:"getActions",value:function(){throw new Error('The "getActions" method must be implemented')}},{key:"getExpressionHandlers",value:function(){throw new Error('The "getExpressionHandlers" method must be implemented')}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}()));var L=V.getActions(),k=L.setValue,R=L.clear,B=L.MC,J=L.MR,$=L.M_MINUS,D=L.M_PLUS,W=L.cancel,z=L.factorial,G=L.change_sign,K=L.minus,Q=L.percent,X=L.multiply,Y=L.sum,Z=L.dot,ee=L.equal,ne=L.division,re=L.sqrt,te=L.degree,oe=L.ten_x,ie=L._1_x,ae={value_0:{el:o("value_0"),handler:k(0)},value_1:{el:o("value_1"),handler:k(1)},value_2:{el:o("value_2"),handler:k(2)},value_3:{el:o("value_3"),handler:k(3)},value_4:{el:o("value_4"),handler:k(4)},value_5:{el:o("value_5"),handler:k(5)},value_6:{el:o("value_6"),handler:k(6)},value_7:{el:o("value_7"),handler:k(7)},value_8:{el:o("value_8"),handler:k(8)},value_9:{el:o("value_9"),handler:k(9)},clear:{el:o("clear"),handler:R},change_sign:{el:o("change_sign"),handler:G},percent:{el:o("percent"),handler:Q},division:{el:o("division"),handler:ne},multiply:{el:o("multiply"),handler:X},minus:{el:o("minus"),handler:K},sum:{el:o("sum"),handler:Y},dot:{el:o("dot"),handler:Z},MC:{el:o("MC"),handler:B},MR:{el:o("MR"),handler:J},M_MINUS:{el:o("M_MINUS"),handler:$},M_PLUS:{el:o("M_PLUS"),handler:D},cancel:{el:o("cancel"),handler:W},x_2:{el:o("x_2"),handler:te(2)},x_3:{el:o("x_3"),handler:te(3)},x_y:{el:o("x_y"),handler:te()},sqrt_2:{el:o("sqrt_2"),handler:re(2)},sqrt_3:{el:o("sqrt_3"),handler:re(3)},sqrt_y:{el:o("sqrt_y"),handler:re()},_10_x:{el:o("_10_x"),handler:oe},_1_x:{el:o("_1_x"),handler:ie},factorial:{el:o("factorial"),handler:z},equal:{el:o("equal"),handler:ee}},se=o("screen_data"),ue=o("input_buttons");se.addEventListener("click",(function(){var e=V.expression[V.expression.length-1];e&&e.twoValue&&(e.change=!e.change),se.innerHTML=V.getUI()})),Object.keys(ae).forEach((function(e){var n=ae[e];n.el.addEventListener("click",n.handler)})),ue.addEventListener("click",(function(){se.scrollLeft=se.scrollWidth,se.innerHTML=V.getUI()})),t(n)})();
//# sourceMappingURL=fe60b5c8143cb59c90c0.js.map